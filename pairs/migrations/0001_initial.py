# Generated by Django 4.2.15 on 2024-09-14 12:31

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Blockchains',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50, unique=True, verbose_name='Сеть')),
            ],
            options={
                'db_table': 'blockchain',
            },
        ),
        migrations.CreateModel(
            name='DexNames',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=150, unique=True, verbose_name='DEX')),
                ('address', models.CharField(max_length=150, unique=True, verbose_name='Адрес контракта')),
                ('blockchain', models.ForeignKey(on_delete=django.db.models.deletion.DO_NOTHING, to='pairs.blockchains', verbose_name='Сеть')),
            ],
            options={
                'db_table': 'dex_name',
            },
        ),
        migrations.CreateModel(
            name='Pools',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('address', models.CharField(max_length=150, unique=True, verbose_name='Адрес')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Время создания')),
                ('transactions', models.PositiveIntegerField(default=0, verbose_name='Количество транзакций')),
                ('makers', models.PositiveIntegerField(default=0, verbose_name='Количество makers')),
                ('volume', models.IntegerField(default=0, verbose_name='vol')),
                ('liquidity', models.IntegerField(default=0, verbose_name='Ликвидность')),
                ('mcap', models.IntegerField(default=0, verbose_name='mcap')),
                ('price_change_5m', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Изменение цены 5 мин')),
                ('price_change_1h', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Изменение цены 1 час')),
                ('price_change_6h', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Изменение цены 6 часов')),
                ('price_change_24h', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Изменение цены 24 часа')),
                ('blockchain', models.ForeignKey(on_delete=django.db.models.deletion.DO_NOTHING, to='pairs.blockchains', verbose_name='Сеть')),
                ('dex_name', models.ForeignKey(on_delete=django.db.models.deletion.DO_NOTHING, to='pairs.dexnames', verbose_name='DEX')),
            ],
            options={
                'db_table': 'pool',
            },
        ),
        migrations.CreateModel(
            name='Tokens',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=150, verbose_name='Имя')),
                ('symbol', models.CharField(max_length=15, verbose_name='Символ')),
                ('address', models.CharField(max_length=150, unique=True, verbose_name='Адрес')),
                ('blockchain', models.ForeignKey(on_delete=django.db.models.deletion.DO_NOTHING, to='pairs.blockchains', verbose_name='Сеть')),
            ],
            options={
                'db_table': 'token',
            },
        ),
        migrations.CreateModel(
            name='TokenPools',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('pool', models.ForeignKey(on_delete=django.db.models.deletion.DO_NOTHING, to='pairs.pools', verbose_name='ID пула')),
                ('token', models.ForeignKey(on_delete=django.db.models.deletion.DO_NOTHING, to='pairs.tokens', verbose_name='ID токена')),
            ],
            options={
                'db_table': 'token_pool',
            },
        ),
        migrations.AddField(
            model_name='pools',
            name='token',
            field=models.ForeignKey(on_delete=django.db.models.deletion.DO_NOTHING, related_name='token', to='pairs.tokens', verbose_name='Адрес токена'),
        ),
        migrations.CreateModel(
            name='PoolTokenPrice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('timestamp', models.DateTimeField(auto_now_add=True, verbose_name='Время получения цены')),
                ('usd_price', models.DecimalField(decimal_places=10, max_digits=13, verbose_name='Цена USD')),
                ('native_token_price', models.DecimalField(decimal_places=10, max_digits=20)),
                ('pool', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='prices', to='pairs.pools')),
            ],
            options={
                'db_table': 'pool_price',
                'indexes': [models.Index(fields=['pool', 'timestamp'], name='pool_price_pool_id_e2a0a1_idx')],
                'unique_together': {('pool', 'timestamp')},
            },
        ),
    ]
